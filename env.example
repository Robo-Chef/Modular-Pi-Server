# Raspberry Pi Home Server Environment Configuration
# Copy this file to .env and update with your values

# Universal password for all services (for ease of use)
UNIVERSAL_PASSWORD=CHANGE_ME

# Pi-hole specific
PIHOLE_PASSWORD=${UNIVERSAL_PASSWORD}
PIHOLE_ADMIN_EMAIL=admin@yourdomain.local
PIHOLE_HOSTNAME=my-pihole.local

# Timezone (e.g., Australia/Sydney, America/New_York, Europe/London)
TZ=Australia/Sydney # Example: your_timezone

# SSH Configuration
SSH_PORT=22  # Default SSH port (22 is standard, change only if needed)

# Service Ports Configuration
DNS_PORT=53              # DNS service port (Pi-hole)
HTTP_PORT=80             # Pi-hole web interface port
HTTPS_PORT=443           # HTTPS port (for future SSL)
GRAFANA_PORT=3000        # Grafana monitoring dashboard
UPTIME_KUMA_PORT=3001    # Uptime Kuma monitoring
PROMETHEUS_PORT=9090     # Prometheus metrics (localhost only)
NODE_EXPORTER_PORT=9100  # System metrics exporter

# System Performance Tuning
NETWORK_BUFFER_SIZE=26214400  # Network receive/send buffer size (bytes)
VM_SWAPPINESS=1               # Reduce swap usage (0-100, lower = less swap)
VM_DIRTY_RATIO=15             # Dirty page ratio for memory management
VM_DIRTY_BACKGROUND_RATIO=5   # Background dirty page ratio
FS_FILE_MAX=65536             # Maximum number of open file descriptors

# Docker Resource Limits
PIHOLE_CPU_LIMIT=1.0          # Pi-hole CPU limit (cores)
PIHOLE_MEMORY_LIMIT=512M      # Pi-hole memory limit
PIHOLE_MEMORY_RESERVATION=256M # Pi-hole guaranteed memory
UNBOUND_CPU_LIMIT=0.5         # Unbound CPU limit (cores)
UNBOUND_MEMORY_LIMIT=256M     # Unbound memory limit
UNBOUND_MEMORY_RESERVATION=128M # Unbound guaranteed memory

# Monitoring Configuration
PROMETHEUS_RETENTION=15d      # How long to keep Prometheus metrics

# Network configuration
# IMPORTANT: Replace XXX with your actual Pi's IP address (e.g., 100, 150, 200)
# This IP must match what you configured during OS flashing with Raspberry Pi Imager
PI_STATIC_IP=192.168.1.XXX
PI_GATEWAY=192.168.1.1
PI_DNS_SERVERS=8.8.8.8,8.8.4.4

# Docker networks (use these defaults unless you have conflicts)
PIHOLE_NETWORK=172.25.0.0/24
MONITORING_NETWORK=172.26.0.0/24
PIHOLE_GATEWAY=172.25.0.1
MONITORING_GATEWAY=172.26.0.1
PIHOLE_NET_IP_PIHOLE=172.25.0.3
PIHOLE_NET_IP_UNBOUND=172.25.0.2

# Backup configuration
BACKUP_RETENTION_DAYS=30
BACKUP_DIR=/home/${USER}/pihole-server/backups # Use dynamic user path
REMOTE_BACKUP_LOCATION= # Example: user@remote_host:/path/to/remote/backups or /mnt/usb_drive

# Monitoring Credentials
GRAFANA_ADMIN_PASSWORD=${UNIVERSAL_PASSWORD}

# Service stack toggles
ENABLE_MONITORING=true
ENABLE_OPTIONAL_SERVICES=true
ENABLE_WATCHTOWER=true

# Optional services toggles
ENABLE_HOME_ASSISTANT=false
ENABLE_GITEA=false
ENABLE_UPTIME_KUMA=true
ENABLE_PORTAINER=true
ENABLE_DOZZLE=true
ENABLE_SPEEDTEST_TRACKER=true

# Watchtower email notifications (optional)
# If you enable notifications, set these accordingly. Leave blank to disable email.
WATCHTOWER_EMAIL_FROM=noreply@yourdomain.local
WATCHTOWER_EMAIL_TO=admin@yourdomain.local
WATCHTOWER_EMAIL_SERVER=smtp.gmail.com
WATCHTOWER_EMAIL_PORT=587
WATCHTOWER_EMAIL_USER= # Required if WATCHTOWER_NOTIFICATIONS is set to 'email'
WATCHTOWER_EMAIL_PASSWORD= # Required if WATCHTOWER_NOTIFICATIONS is set to 'email'
